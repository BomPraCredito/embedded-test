<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Documento para Assinar</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
    }

    .header {
      margin-bottom: 50px;
      padding: 20px;
      background-color: orange;
      color: white;
    }

    #container {
      width: 100%;
      height: 600px;
    }

    iframe {
      border: none;
    }
  </style>
</head>
<body>

  <div class="header">
    <%= link_to 'PÃ¡gina Inicial', environment_path(@batch.environment) %>
    BANCO ORANGE TESTE
  </div>

  <div id="container"></div>

  <script type="text/javascript">
    function Clicksign(o){"use strict";var r,u,t=window.location.protocol+"//"+window.location.host,e={},n=function(t){(e[t]||[]).forEach(function(t){t()})},c=function(t){n(t.data)};return{endpoint:"https://app.clicksign.com",origin:t,mount:function(t){var n="/sign/"+o,e="?embedded=true&origin="+this.origin,i=this.endpoint+n+e;return u=document.getElementById(t),(r=document.createElement("iframe")).setAttribute("src",i),r.setAttribute("style","width: 100%; height: 100%;"),window.addEventListener("message",c),u.appendChild(r)},unmount:function(){return r&&(u.removeChild(r),r=u=null,window.removeEventListener("message",n)),!0},on:function(t,n){return e[t]||(e[t]=[]),e[t].push(n)},trigger:n}}
  </script>

  <script type="text/javascript">
    var signature_key = "<%= @batch.key %>"
    var endpoint = "<%= @batch.environment.endpoint %>"

    var widget = new Clicksign(signature_key);

    widget.endpoint = endpoint;

    widget.mount('container');

    widget.on('loaded', function(ev) {
      console.log('loaded!');
    });
  </script>
</body>
</html>
